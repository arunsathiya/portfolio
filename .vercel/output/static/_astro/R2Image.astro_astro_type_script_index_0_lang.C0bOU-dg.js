async function a(){const t=document.querySelectorAll("img[data-r2-key]");t.length===0&&console.warn("No images found with data-r2-key attribute. DOM content:",document.body.innerHTML);for(const r of t){const o=r.getAttribute("data-r2-key");if(o)try{const e=await fetch(`/api/signedUrl?key=${encodeURIComponent(o)}`,{headers:{Accept:"application/json"}});if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);const n=await e.json();n.url?r.src=n.url:console.error("No URL received in the response")}catch(e){console.error("Failed to refresh signed URL:",e)}else console.warn("Image found without data-r2-key attribute")}}a();setInterval(a,50*60*1e3);
